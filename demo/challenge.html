<!DOCTYPE html>
<html lang="en">
<head>
    <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Challenge</title>

    <style type="text/css">

        /* Challenge #2:
  -center the content horizontally
  -provide ample spacing for readability
        */

        div {
            margin: auto;
            padding: 10px;
            text-align: center;
        }

    </style>
</head>
<body>

<h1>Code Challenge</h1>
<!-- Challenge #3: -->
<!-- Demonstrate 508 compliance in the result divs -->
<div id="content" class="center">
    <div>3 9 2 7 5 6 0 8 4 1</div>
    <div>Result:</div>

    <div>4 5 8 0 3 4 2 9 6 1</div>
    <div>Result:</div>

    <div>9 0 5 7 1 8 4 2 3 6</div>
    <div>Result:</div>
</div>


<script src="bower_components/jquery/dist/jquery.min.js"></script>
<script src="bower_components/lodash/dist/lodash.min.js"></script>

<script type="text/javascript">
  // Challenge #1: find the smallest three numbers in each of the divs, insert the result to the corresponding result div sections
  // Requirements:
  //  -only traverse each list of numbers once
  //  -the solution should work with any number of groups in the div #content
  //  -code should be clean, efficient, and self-documenting
  //  -jquery and underscore are pre-loaded, demonstrate at least one efficient usage of each

  /***
   * main()
   *
   */
  function main() {

    var lastResult;
    $.each($('#content').children(), function (index, row) {
      // TODO consider more robust exclusion of 'data' divs
      if ( row.innerText !== 'Result:') {
        lastResult = smallestThreeSum(row.innerText);
      } else {
        row.innerText = row.innerText + ' ' + lastResult;
      }
    });
  }

  /***
   * Pseudo code suggests that it return the sum - e.g. _.reduce()
   * however specification says find the 3 smallest, so opted to go with the spec
   *
   * @param nums
   */
  function smallestThreeSum(nums){
    var values = nums.split(' ');

    // N.B. sorting items as String not Number
    // TODO consider more efficient lodash - not sorting
    var results = _(values).sortBy().take(3).value();
    console.log(results);
    return results.join(' ');
  }

  $(function() {
    main();
  });

</script>

</body>
</html>